
INSIGHTS_PROMPT = """
You are given a normalized W-2 JSON (strict) that contains employee address and federal/state/local fields.
Return a JSON object with:
{
  "insights": [ "<short bullet string>", ... ],
  "confidence": 0-1,
  "notes": [ "parse warnings or additional context strings" ]
}
Produce short bullet-like single-sentence strings (no numbering). Consider:
- ZIP â†” state sanity (ZIP first 3 digits vs state mismatch)
- If multiple state entries present -> "Multi-state income detected"
- Withholding heuristics: federal withholding as % of Box1
- Social Security cap check: if box3 is near statutory limit for the tax year (do not hardcode year; use a heuristic: if box3 > 120000 mark "near cap")
- Consistency checks: large difference between box1 and box3/5, tips presence, medicare > ss wages, etc.
Return only JSON, nothing else.
Use the provided JSON below:
{W2_JSON}
"""